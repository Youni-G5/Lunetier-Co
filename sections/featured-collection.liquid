{% comment %}
  Section "Collection Capsule" Lunetier - Grille de produits Cross-sell
  Design : Images épurées, effet hover sophistiqué, utilise le snippet product-card
{% endcomment %}

<style>
  #shopify-section-{{ section.id }} {
    background-color: var(--color-white);
    padding-top: 6rem;
    padding-bottom: 6rem;
  }

  .lunetier-collection-container {
    max-width: 80rem;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .lunetier-collection-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .lunetier-collection-title {
    font-family: var(--font-serif);
    font-size: 2rem;
    font-weight: 500;
    margin-bottom: 1rem;
    color: var(--color-black);
  }

  @media (min-width: 768px) {
    .lunetier-collection-title {
      font-size: 3rem;
    }
  }

  .lunetier-collection-desc {
    color: var(--color-gray-500);
    font-family: var(--font-sans);
    font-size: 1rem;
    max-width: 40rem;
    margin: 0 auto;
  }
</style>

<div class="lunetier-collection-container">
  
  <!-- HEADER -->
  <div class="lunetier-collection-header">
    <h2 class="lunetier-collection-title">
      {{ section.settings.title | default: "La Collection Capsule" }}
    </h2>
    <p class="lunetier-collection-desc">
      {{ section.settings.description | default: "Quelques pièces exclusives pour compléter votre style." }}
    </p>
  </div>

  <!-- GRID -->
  <div class="lunetier-products-grid lunetier-products-grid--3-col">
    {%- assign collection = collections[section.settings.collection] -%}
    
    {%- if collection != blank -%}
      {%- for product in collection.products limit: section.settings.limit -%}
        {% render 'product-card',
          product: product,
          show_second_image: true,
          show_badge: true,
          show_vendor: false,
          image_loading: 'lazy'
        %}
      {%- endfor -%}
    {%- else -%}
      {% comment %} PLACEHOLDER CONTENT {% endcomment %}
      {%- for i in (1..section.settings.limit) -%}
        <article class="lunetier-product-card">
          <a href="#" class="lunetier-card-link">
            <div class="lunetier-card-image-wrapper">
              <span class="lunetier-card-badge lunetier-badge-new">Nouveau</span>
              {{ 'product-' | append: i | placeholder_svg_tag: 'lunetier-card-img lunetier-card-img-main' }}
              <div class="lunetier-card-btn">Voir - 129€</div>
            </div>
            <div class="lunetier-card-info">
              <div class="lunetier-card-details">
                <h3 class="lunetier-card-title">Nom du Modèle</h3>
                <p class="lunetier-card-meta">Acétate Italien</p>
              </div>
              <div class="lunetier-card-price-wrapper">
                <span class="lunetier-card-price">129 €</span>
              </div>
            </div>
          </a>
        </article>
      {%- endfor -%}
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "Collection Capsule",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titre",
      "default": "La Collection Capsule"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Quelques pièces exclusives pour compléter votre style."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Choisir la collection"
    },
    {
      "type": "range",
      "id": "limit",
      "min": 3,
      "max": 12,
      "step": 3,
      "default": 3,
      "label": "Nombre de produits"
    }
  ],
  "presets": [
    {
      "name": "Collection Capsule Lunetier"
    }
  ]
}
{% endschema %}
