{% comment %}
  Hero Section "Lunetier" - Full screen with featured product
  Reproduces React design: Immersive image, elegant typography, "Bestseller" badge
  Button 1: Adds to cart if product selected
{% endcomment %}

<style>
  .lunetier-hero-section {
    position: relative;
    height: 100vh; /* Full screen */
    min-height: 700px; /* Min height for small screens */
    width: 100%;
    display: flex;
    align-items: center;
    overflow: hidden;
    color: #ffffff;
  }

  /* --- BACKGROUND IMAGE --- */
  .lunetier-hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
  }

  .lunetier-hero-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  /* --- OVERLAY (GRADIENT) --- */
  .lunetier-hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to right, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0) 100%);
    z-index: 1;
  }

  /* --- CONTENT CONTAINER --- */
  .lunetier-hero-container {
    position: relative;
    z-index: 10;
    max-width: 80rem; /* max-w-7xl */
    margin: 0 auto;
    padding: 0 1.5rem; /* px-6 */
    width: 100%;
    padding-top: 5rem; /* pt-20 to avoid header overlap */
  }

  .lunetier-hero-content {
    max-width: 36rem; /* max-w-xl */
  }

  /* --- BADGE --- */
  .lunetier-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background-color: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem; /* text-xs */
    font-weight: 500;
    margin-bottom: 1.5rem;
    font-family: sans-serif;
  }

  .lunetier-badge svg {
    width: 12px;
    height: 12px;
    fill: #facc15; /* yellow-400 */
    color: #facc15;
  }

  /* --- TYPOGRAPHY --- */
  .lunetier-hero-title {
    font-family: serif;
    font-size: 3rem; /* text-5xl mobile */
    line-height: 1.1;
    font-weight: 500;
    margin-bottom: 1.5rem;
  }

  @media (min-width: 768px) {
    .lunetier-hero-title {
      font-size: 4.5rem; /* text-7xl desktop */
    }
  }

  .lunetier-hero-desc {
    font-size: 1.125rem; /* text-lg */
    color: #e5e7eb; /* gray-200 */
    margin-bottom: 2rem;
    font-weight: 300; /* font-light */
    line-height: 1.6;
    font-family: sans-serif;
  }

  @media (min-width: 768px) {
    .lunetier-hero-desc {
      font-size: 1.25rem; /* text-xl */
    }
  }

  /* --- BUTTONS --- */
  .lunetier-btn-group {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  @media (min-width: 640px) {
    .lunetier-btn-group {
      flex-direction: row;
    }
  }

  .lunetier-btn {
    padding: 1rem 2rem; /* py-4 px-8 */
    font-size: 0.875rem; /* text-sm */
    font-weight: 500;
    letter-spacing: 0.025em; /* tracking-wide */
    text-transform: uppercase;
    text-decoration: none;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    transition: all 0.2s;
    cursor: pointer;
    border: 1px solid transparent;
    font-family: sans-serif;
  }

  .lunetier-btn-primary {
    background-color: #ffffff;
    color: #000000;
  }

  .lunetier-btn-primary:hover {
    background-color: #f3f4f6; /* gray-100 */
  }

  .lunetier-btn-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .lunetier-btn-outline {
    background-color: transparent;
    border-color: #ffffff;
    color: #ffffff;
  }

  .lunetier-btn-outline:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  /* --- TRUST INDICATORS (Bottom) --- */
  .lunetier-trust {
    margin-top: 3rem;
    display: flex;
    align-items: center;
    gap: 1.5rem;
    font-size: 0.875rem; /* text-sm */
    color: #d1d5db; /* gray-300 */
    font-family: sans-serif;
  }

  .lunetier-trust-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .lunetier-trust-item svg {
    width: 16px;
    height: 16px;
  }
</style>

<div class="lunetier-hero-section">
  
  <!-- IMAGE BACKGROUND -->
  <div class="lunetier-hero-bg">
    {%- if section.settings.image != blank -%}
      {{ section.settings.image | image_url: width: 2000 | image_tag: 
        loading: 'eager', 
        sizes: '100vw', 
        widths: '375, 550, 750, 1100, 1500, 2000, 3000' 
      }}
    {%- else -%}
      <!-- Placeholder SVG if no image -->
      {{ 'lifestyle-1' | placeholder_svg_tag }}
    {%- endif -%}
  </div>

  <!-- OVERLAY GRADIENT -->
  <div class="lunetier-hero-overlay"></div>

  <!-- CONTENT -->
  <div class="lunetier-hero-container">
    <div class="lunetier-hero-content">
      
      <!-- BADGE -->
      {%- if section.settings.badge_text != blank -%}
        <div class="lunetier-badge">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="none">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
          </svg>
          <span>{{ section.settings.badge_text }}</span>
        </div>
      {%- endif -%}

      <!-- TITLE -->
      <h1 class="lunetier-hero-title">
        {{ section.settings.title | replace: '<br>', '<br/>' }}
      </h1>

      <!-- DESCRIPTION -->
      <div class="lunetier-hero-desc">
        {{ section.settings.description }}
      </div>

      <!-- BUTTONS -->
      {%- assign product = section.settings.product -%}
      
      <div class="lunetier-btn-group">
        
        <!-- MAIN BUTTON (Add to Cart if product, otherwise link) -->
        {%- if product != blank -%}
          <!-- Cart Add Form -->
          <form action="/cart/add" method="post" id="hero-add-to-cart-{{ section.id }}">
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            <button 
              type="submit" 
              class="lunetier-btn lunetier-btn-primary"
              {% unless product.available %}disabled{% endunless %}
            >
              {% if product.available %}
                {{ section.settings.button_text_1 }} - {{ product.selected_or_first_available_variant.price | money_without_trailing_zeros }}
              {% else %}
                Sold Out
              {% endif %}
            </button>
          </form>
        {%- else -%}
          <!-- Classic link if no product -->
          <a href="{{ section.settings.button_link_1 }}" class="lunetier-btn lunetier-btn-primary">
            {{ section.settings.button_text_1 }}
          </a>
        {%- endif -%}

        <!-- SECONDARY BUTTON -->
        {%- if section.settings.button_text_2 != blank -%}
          <a href="{{ section.settings.button_link_2 }}" class="lunetier-btn lunetier-btn-outline">
            {{ section.settings.button_text_2 }}
          </a>
        {%- endif -%}
      </div>

      <!-- TRUST SIGNALS -->
      <div class="lunetier-trust">
        <div class="lunetier-trust-item">
          <!-- Truck Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>
          <span>{{ section.settings.trust_text_1 }}</span>
        </div>
        <div class="lunetier-trust-item">
          <!-- Shield Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>
          <span>{{ section.settings.trust_text_2 }}</span>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
(function() {
  'use strict';
  
  const form = document.getElementById('hero-add-to-cart-{{ section.id }}');
  if (!form) return;
  
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const button = form.querySelector('button[type="submit"]');
    const originalText = button.textContent;
    
    // Loading state
    button.disabled = true;
    button.textContent = 'Adding...';
    
    const formData = new FormData(form);
    
    fetch('/cart/add.js', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(data => {
      console.log('✅ Product added to cart:', data);
      
      // Success feedback
      button.textContent = 'Added!';
      
      // Update cart count
      fetch('/cart.js')
        .then(r => r.json())
        .then(cart => {
          const cartCount = document.querySelector('.lunetier-cart-count');
          if (cartCount) {
            cartCount.textContent = cart.item_count;
            cartCount.style.display = cart.item_count > 0 ? 'flex' : 'none';
          }
        });
      
      // Reset button after 2s
      setTimeout(function() {
        button.disabled = false;
        button.textContent = originalText;
      }, 2000);
    })
    .catch(error => {
      console.error('❌ Error adding to cart:', error);
      button.textContent = 'Error';
      
      setTimeout(function() {
        button.disabled = false;
        button.textContent = originalText;
      }, 2000);
    });
  });
})();
</script>

{% schema %}
{
  "name": "Hero Lunetier",
  "settings": [
    {
      "type": "header",
      "content": "Visual"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Background image"
    },
    {
      "type": "header",
      "content": "Text Content"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge text",
      "default": "Bestseller 2024"
    },
    {
      "type": "textarea",
      "id": "title",
      "label": "Main title",
      "default": "Elegance <br/>at First Sight.",
      "info": "Use <br/> to break lines"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Discover The Icon. A frame designed in Paris, built to last and enhance your face."
    },
    {
      "type": "header",
      "content": "Product & Buttons"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Featured product",
      "info": "Select a product to enable direct add to cart."
    },
    {
      "type": "text",
      "id": "button_text_1",
      "label": "Button 1 text",
      "default": "ADD TO CART"
    },
    {
      "type": "url",
      "id": "button_link_1",
      "label": "Button 1 link (if no product)"
    },
    {
      "type": "text",
      "id": "button_text_2",
      "label": "Button 2 text",
      "default": "DISCOVER THE DESIGN"
    },
    {
      "type": "url",
      "id": "button_link_2",
      "label": "Button 2 link"
    },
    {
      "type": "header",
      "content": "Trust indicators (Bottom section)"
    },
    {
      "type": "text",
      "id": "trust_text_1",
      "label": "Trust text 1",
      "default": "48h Delivery"
    },
    {
      "type": "text",
      "id": "trust_text_2",
      "label": "Trust text 2",
      "default": "2 Year Warranty"
    }
  ],
  "presets": [
    {
      "name": "Hero Lunetier"
    }
  ]
}
{% endschema %}