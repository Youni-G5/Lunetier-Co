{% comment %}
  Section Header "Lunetier" - Style Minimaliste & Sticky
  Optimisé : CSS externe dans assets/header.css
{% endcomment %}

<div class="lunetier-header-wrapper" id="HeaderWrapper-{{ section.id }}">
  <div class="lunetier-container">
    
    <!-- LOGO -->
    <a href="{{ routes.root_url }}" class="lunetier-logo" aria-label="Retour à l'accueil">
      {%- if section.settings.logo != blank -%}
        {% render 'responsive-image',
          image: section.settings.logo,
          sizes: '(min-width: 768px) 150px, 100px',
          loading: 'eager',
          class: 'lunetier-logo-img',
          alt: section.settings.logo.alt | default: shop.name
        %}
      {%- else -%}
        {{ shop.name }}
      {%- endif -%}
    </a>

    <div class="lunetier-actions">
      <!-- DESKTOP MENU -->
      <nav class="lunetier-nav" role="navigation" aria-label="Menu principal">
        {%- for link in section.settings.menu.links -%}
          <a href="{{ link.url }}" class="lunetier-link">{{ link.title }}</a>
        {%- endfor -%}
      </nav>

      <!-- CART ICON -->
      <a href="{{ routes.cart_url }}" class="lunetier-icon-btn" id="cart-icon-bubble" aria-label="Panier ({{ cart.item_count }} article{% if cart.item_count > 1 %}s{% endif %})">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
        {%- if cart.item_count > 0 -%}
          <span class="lunetier-cart-count">{{ cart.item_count }}</span>
        {%- endif -%}
      </a>

      <!-- MOBILE BURGER TRIGGER -->
      <button class="lunetier-icon-btn lunetier-mobile-toggle" aria-label="Ouvrir le menu" id="MobileMenuTrigger-{{ section.id }}">
         <svg xmlns="http://www.w3.org/2000/svg" class="icon-svg" viewBox="0 0 24 24" aria-hidden="true">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
         </svg>
      </button>
    </div>

  </div>
</div>

<!-- MOBILE DRAWER HTML -->
<div class="lunetier-drawer-overlay" id="MobileDrawerOverlay-{{ section.id }}" role="presentation"></div>
<div class="lunetier-drawer" id="MobileDrawer-{{ section.id }}" role="dialog" aria-modal="true" aria-label="Menu mobile">
  <div class="lunetier-drawer-header">
    <span class="lunetier-drawer-title">Menu</span>
    <button class="lunetier-drawer-close" id="MobileDrawerClose-{{ section.id }}" aria-label="Fermer le menu">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>
  
  <nav class="lunetier-drawer-nav" role="navigation" aria-label="Menu mobile">
    {%- for link in section.settings.menu.links -%}
      <a href="{{ link.url }}" class="lunetier-drawer-link">{{ link.title }}</a>
    {%- endfor -%}
    <!-- Liens additionnels mobile -->
    <a href="{{ routes.account_url }}" class="lunetier-drawer-link lunetier-drawer-link--secondary">Mon Compte</a>
  </nav>
</div>

{% comment %}
  Note: Le JavaScript pour le header est maintenant dans assets/theme.js
  - Scroll management avec debounce
  - Mobile drawer open/close
  - Focus trap dans le drawer
{% endcomment %}

{% schema %}
{
  "name": "Header Lunetier",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 250,
      "step": 10,
      "default": 100,
      "unit": "px",
      "label": "Largeur du logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu principal"
    }
  ]
}
{% endschema %}
